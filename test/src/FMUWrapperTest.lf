target Python{
    timeout: 10s,
    files: [
        "../../frost/src/python_lib/frost.py",
        "../../frost/src/python_lib/l_formatter.py",
        "../../frost/src/python_lib/time_utils.py",
    ],
    fast: true,
    logging: error,
    single-threaded: false,
}

import FMUWrapper from "../../src/lib/simulation/FMUWrapper.lf"

preamble{=
    import yaml
    import logging
    from frost import FROST_CONFIG
=}

reactor Test extends FMUWrapper{

    reaction(doStep) -> doStep {=
        if self.fmu == None:
            return

        logging.warning(f"Step at time {self.fmu_time}, LF time: {lf.time.logical_elapsed(), lf.tag().microstep}")
        logging.warning(f"Variables: {self.fmu.getReal(self.vars)}")
        doStep.schedule(MSEC(self.step))
    =}
}

main reactor{
    fmu_test = new Test(name = "bouncingBall", file_path = "utils/bouncingBall.fmu", step = 100)
}